# K-OCR Web Corrector - 문제 해결 가이드

## 🔍 문제 진단 가이드

### 1단계: 기본 확인사항
문제가 발생했을 때 다음 사항들을 먼저 확인해주세요:

- ✅ **인터넷 연결**: 안정적인 네트워크 연결 확인
- ✅ **브라우저 버전**: [지원 브라우저 목록](./system-requirements.md#지원-브라우저) 확인
- ✅ **JavaScript 활성화**: 브라우저 설정에서 JavaScript 허용 확인
- ✅ **파일 형식**: PDF 파일 (.pdf) 확인
- ✅ **파일 크기**: 50MB 이하 확인

### 2단계: 브라우저 기본 해결책
```javascript
// 브라우저 콘솔(F12)에서 실행하여 기본 호환성 확인
console.log('브라우저 호환성 체크:');
console.log('File API:', !!window.File);
console.log('Local Storage:', !!window.localStorage);
console.log('Fetch API:', !!window.fetch);
```

## 🚫 업로드 관련 문제

### 파일 업로드가 안 되는 경우

#### 증상 1: 드래그 앤 드롭이 작동하지 않음
**원인:**
- 브라우저 호환성 문제
- JavaScript 비활성화
- 확장 프로그램 간섭

**해결방법:**
1. **브라우저 확인**
   ```bash
   Chrome/Firefox/Safari/Edge 최신 버전 사용
   Internet Explorer는 지원하지 않음
   ```

2. **JavaScript 활성화**
   - Chrome: 설정 → 개인정보 보호 및 보안 → 사이트 설정 → JavaScript → 허용
   - Firefox: about:config → javascript.enabled → true
   - Safari: 환경설정 → 보안 → JavaScript 사용

3. **확장 프로그램 비활성화**
   - 시크릿/프라이빗 모드에서 테스트
   - 광고 차단기, 스크립트 차단기 일시 비활성화

#### 증상 2: "파일을 업로드할 수 없습니다" 오류
**원인:**
- 파일 크기 초과 (50MB 제한)
- 잘못된 파일 형식
- 네트워크 연결 불안정

**해결방법:**
1. **파일 크기 확인**
   ```bash
   파일 속성에서 크기 확인
   50MB 이상인 경우 PDF 압축 도구 사용
   또는 페이지를 나누어 여러 파일로 분할
   ```

2. **파일 형식 확인**
   - 확장자가 .pdf인지 확인
   - PDF 편집 도구로 다시 저장해보기
   - 스캔 PDF인지 텍스트 PDF인지 확인

3. **네트워크 확인**
   ```bash
   인터넷 속도 테스트 (최소 10Mbps 권장)
   Wi-Fi 신호 강도 확인
   유선 연결로 테스트
   ```

#### 증상 3: 업로드 중 중단됨
**원인:**
- 네트워크 불안정
- 브라우저 메모리 부족
- 서버 일시적 과부하

**해결방법:**
1. **네트워크 안정화**
   - 다른 다운로드/스트리밍 중단
   - VPN 사용 중인 경우 비활성화
   - 모바일 데이터 대신 Wi-Fi 사용

2. **브라우저 최적화**
   ```bash
   불필요한 탭 닫기
   브라우저 재시작
   시크릿 모드에서 재시도
   ```

3. **재시도 전략**
   - 5분 후 재시도
   - 파일 크기를 절반으로 줄여서 테스트
   - 다른 브라우저에서 시도

## ⚙️ OCR 처리 관련 문제

### 처리 중 멈춤 현상

#### 증상 1: 진행률이 특정 단계에서 멈춤
**단계별 대처법:**

**업로드 단계 (0-10%):**
```bash
문제: 파일 전송 실패
해결: 네트워크 연결 확인, 파일 크기 축소
```

**변환 단계 (10-30%):**
```bash
문제: PDF 변환 실패
해결: PDF 파일 재저장, 다른 PDF 뷰어로 열기 테스트
```

**전처리 단계 (30-50%):**
```bash
문제: 이미지 처리 실패
해결: 전처리 옵션 일부 비활성화
```

**OCR 단계 (50-80%):**
```bash
문제: OCR 엔진 오류
해결: 다른 OCR 엔진 선택, 앙상블 모드 해제
```

**교정 단계 (80-95%):**
```bash
문제: 텍스트 교정 실패
해결: 교정 옵션 비활성화
```

#### 증상 2: "처리 시간이 너무 오래 걸립니다"
**원인 분석:**
- 파일 크기: 20MB 이상
- 페이지 수: 20페이지 이상
- 복잡한 레이아웃: 표, 그래프 포함
- 이미지 품질: 저해상도 또는 노이즈

**최적화 방법:**
1. **파일 분할**
   ```bash
   PDF 분할 도구 사용
   10페이지 이하로 나누어 처리
   중요한 페이지만 선별 처리
   ```

2. **설정 최적화**
   ```bash
   전처리 옵션 최소화
   PaddleOCR 단일 엔진 사용 (앙상블 해제)
   DPI 300으로 설정 (기본값)
   ```

3. **순차 처리**
   - 여러 파일을 한 번에 하나씩 처리
   - 처리 완료 후 다음 파일 업로드

### OCR 결과 품질 문제

#### 증상 1: 텍스트 인식률이 매우 낮음
**원인별 해결책:**

**저화질 스캔:**
```bash
해결책:
1. 전처리 옵션 모두 활성화
   - 흑백 변환 ✓
   - 대비 향상 ✓
   - 기울기 보정 ✓
   - 노이즈 제거 ✓

2. DPI 설정 높이기 (400-600)
3. 앙상블 모드 사용
```

**복잡한 레이아웃:**
```bash
해결책:
1. PDF에서 텍스트 영역만 크롭
2. 표/그래프 제외하고 텍스트 부분만 처리
3. 페이지별로 분할 처리
```

**손글씨 포함:**
```bash
해결책:
1. 신뢰도 임계값 낮춤 (0.3-0.5)
2. 앙상블 모드 사용
3. 수동 교정 전제로 처리
```

#### 증상 2: 한글이 깨져서 나옴
**해결방법:**
1. **브라우저 인코딩 설정**
   - 브라우저 설정에서 UTF-8 인코딩 확인
   - 다운로드 파일을 UTF-8로 열기

2. **다른 OCR 엔진 시도**
   ```bash
   PaddleOCR → Tesseract 전환
   또는 앙상블 모드 사용
   ```

3. **텍스트 에디터 확인**
   - 메모장 대신 메모장++, VS Code 사용
   - "UTF-8로 열기" 옵션 선택

#### 증상 3: 텍스트 순서가 뒤바뀜
**원인:**
- 다단 편집 문서
- 표와 텍스트 혼재
- 이미지와 텍스트 혼재

**해결책:**
1. **영역별 분할 처리**
   - PDF 편집 도구로 영역별로 분할
   - 단순한 레이아웃으로 재편집

2. **후처리 수동 교정**
   - OCR 결과를 워드프로세서에서 재배열
   - 원본 PDF와 대조하여 순서 수정

## 🌐 브라우저별 특별 문제

### Chrome 관련 문제

#### 메모리 부족 오류
```bash
증상: "Aw, Snap!" 또는 "메모리 부족" 오류
해결:
1. chrome://settings/system → 하드웨어 가속 사용
2. 다른 탭 모두 닫기
3. 확장 프로그램 비활성화
4. Chrome 재시작
```

#### 파일 다운로드 실패
```bash
증상: 다운로드 버튼 클릭 시 반응 없음
해결:
1. chrome://settings/downloads → 다운로드 위치 확인
2. 팝업 차단 해제
3. 바이러스 검사 일시 중단
```

### Firefox 관련 문제

#### JavaScript 성능 저하
```bash
증상: 느린 반응 속도
해결:
1. about:config → javascript.options.mem.high_water_mark → 128
2. 추적 방지 설정 → 표준으로 변경
3. 개인정보 보호 설정 완화
```

### Safari 관련 문제

#### iOS Safari 메모리 제한
```bash
증상: 큰 파일 처리 시 브라우저 종료
해결:
1. 다른 앱 모두 종료
2. 파일 크기 5MB 이하로 제한
3. iPad에서 처리 (iPhone보다 메모리 여유)
```

#### macOS Safari 호환성
```bash
증상: 일부 기능 작동 안 함
해결:
1. Safari → 환경설정 → 보안 → JavaScript 허용
2. 팝업 윈도우 허용
3. Safari 최신 버전 업데이트
```

### Edge 관련 문제

#### 호환성 모드 문제
```bash
증상: 레이아웃 깨짐
해결:
1. 호환성 보기 설정 비활성화
2. 엔터프라이즈 모드 비활성화
3. InPrivate 모드에서 테스트
```

## 📱 모바일 특화 문제

### iOS 문제 해결

#### 파일 선택 문제
```bash
증상: PDF 파일이 목록에 안 보임
해결:
1. 파일 앱에 PDF 저장 확인
2. iCloud Drive 동기화 상태 확인
3. "최근 항목"에서 찾기
4. 다른 앱(이메일)에서 "다음으로 열기" → Safari
```

#### 백그라운드 처리 중단
```bash
증상: 앱 전환 시 처리 중단
해결:
1. 처리 중에는 Safari 탭 유지
2. 화면 자동 잠금 해제
3. 저전력 모드 비활성화
4. Wi-Fi 연결 유지
```

### Android 문제 해결

#### 권한 문제
```bash
증상: 파일 접근 권한 오류
해결:
1. Chrome → 설정 → 사이트 설정 → 저장공간 권한 허용
2. 안드로이드 설정 → 앱 → Chrome → 권한 → 저장공간 허용
3. 파일 관리자 앱에서 PDF 파일 위치 확인
```

#### 메모리 부족
```bash
증상: 앱 종료 또는 페이지 새로고침
해결:
1. 백그라운드 앱 정리
2. RAM 용량 3GB 이상 디바이스 사용
3. 파일 크기 3MB 이하로 제한
4. Chrome 캐시 삭제
```

## 🏢 기업 환경 특별 문제

### 방화벽/프록시 관련

#### 업로드 차단
```bash
증상: "네트워크 오류" 또는 "연결 실패"
해결:
1. IT 부서에 다음 도메인 화이트리스트 요청:
   - 메인 서비스 도메인
   - CDN 도메인
   - API 서버 도메인

2. 필요한 포트 허용 요청:
   - HTTPS: 443
   - HTTP: 80 (리다이렉트용)
```

#### 콘텐츠 필터링
```bash
증상: JavaScript나 API 호출 차단
해결:
1. IT 정책 검토 요청
2. 업무용 도구로 분류 요청
3. 예외 처리 신청
```

### 보안 정책 관련

#### 파일 업로드 정책
```bash
증상: "파일 업로드가 정책에 위반됨"
해결:
1. 보안팀과 사용 목적 협의
2. 민감하지 않은 테스트 문서로 시범 사용
3. 개인 네트워크에서 사용 후 결과 복사
```

## 🔧 고급 문제 해결

### 개발자 도구 활용

#### 네트워크 오류 진단
```bash
브라우저에서 F12 → Network 탭
1. 실패한 요청 확인 (빨간색 표시)
2. 응답 코드 확인:
   - 400: 잘못된 요청 (파일 검증 실패)
   - 413: 파일 크기 초과
   - 500: 서버 오류
   - 503: 서버 과부하
```

#### JavaScript 오류 확인
```bash
F12 → Console 탭에서 오류 메시지 확인
일반적인 오류와 해결책:
- "ReferenceError": 브라우저 호환성 문제
- "TypeError": JavaScript 비활성화
- "NetworkError": 네트워크 연결 문제
```

#### 메모리 사용량 확인
```bash
F12 → Performance 탭 → 메모리 그래프 확인
과도한 메모리 사용 시:
1. 브라우저 재시작
2. 하드웨어 가속 활성화
3. 파일 크기 축소
```

### 로그 분석

#### 처리 상태 확인
웹사이트에서 처리 상태가 멈춘 경우:
```javascript
// 브라우저 콘솔에서 실행
fetch('/api/process/{process_id}/status')
  .then(response => response.json())
  .then(data => console.log('현재 상태:', data));
```

## 📊 성능 최적화 팁

### 업로드 성능 향상

#### 파일 준비
```bash
1. PDF 최적화:
   - Adobe Acrobat: 파일 → 다른 이름으로 저장 → 최적화된 PDF
   - 온라인 도구: SmallPDF, PDF24 등 사용

2. 파일 분할:
   - 대용량 PDF를 여러 개로 분할
   - 중요한 페이지만 선별 처리

3. 해상도 조정:
   - 스캔 시 300 DPI로 설정
   - 더 높은 해상도는 처리 시간 증가
```

#### 네트워크 최적화
```bash
1. 연결 환경:
   - 유선 인터넷 사용 (Wi-Fi보다 안정적)
   - 5GHz Wi-Fi 사용 (2.4GHz보다 빠름)
   - 다른 대역폭 사용 애플리케이션 종료

2. 브라우저 최적화:
   - 하드웨어 가속 활성화
   - 불필요한 확장 프로그램 비활성화
   - 캐시 정리
```

### 처리 성능 향상

#### 설정 최적화
```bash
빠른 처리를 위한 권장 설정:
- OCR 엔진: PaddleOCR (단일 엔진)
- 전처리: 기본 설정만 사용
- DPI: 300 (기본값)
- 텍스트 교정: 필요한 경우만 사용
```

#### 시스템 최적화
```bash
1. 메모리 확보:
   - 다른 프로그램 종료
   - 브라우저 탭 정리
   - 백그라운드 프로세스 정리

2. CPU 부하 감소:
   - 바이러스 검사 일시 중단
   - 시스템 업데이트 연기
   - 전원 옵션을 고성능으로 설정
```

## ⚡ 빠른 해결 체크리스트

### 업로드 문제 (5분 해결)
```bash
□ 파일이 PDF 형식인가? (.pdf)
□ 파일 크기가 50MB 이하인가?
□ 인터넷 연결이 안정적인가?
□ 브라우저가 최신 버전인가?
□ JavaScript가 활성화되어 있나?
```

### 처리 문제 (10분 해결)
```bash
□ 처리가 5분 이상 멈춰 있나? → 새로고침 후 재시도
□ 파일이 20페이지 이상인가? → 분할 처리
□ 스캔 품질이 나쁜가? → 전처리 옵션 활성화
□ 메모리 부족 오류가 발생하나? → 브라우저 재시작
□ 다른 브라우저에서도 같은 문제가 발생하나?
```

### 결과 문제 (3분 해결)
```bash
□ 텍스트가 깨져 보이나? → UTF-8 인코딩으로 열기
□ 인식률이 너무 낮은가? → 앙상블 모드 시도
□ 다운로드가 안 되나? → 팝업 차단 해제
□ 클립보드 복사가 안 되나? → Ctrl+A 후 Ctrl+C
```

## 📞 추가 지원

### 자가 진단 도구
문제가 지속되는 경우 다음 정보를 수집하여 문의해주세요:

```bash
시스템 정보:
- 운영체제:
- 브라우저:
- 브라우저 버전:
- 파일 크기:
- 오류 메시지:

테스트 결과:
- 다른 브라우저에서 테스트: □ 성공 □ 실패
- 시크릿 모드에서 테스트: □ 성공 □ 실패
- 더 작은 파일로 테스트: □ 성공 □ 실패
```

### 관련 문서
- **사용법**: [사용자 가이드](./user-guide.md)
- **FAQ**: [자주 묻는 질문](./faq.md)
- **시스템 요구사항**: [지원 환경](./system-requirements.md)

---

**마지막 업데이트**: 2024년 1월
**적용 버전**: K-OCR Web Corrector v1.0+